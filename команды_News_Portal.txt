–ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –º–æ–¥–µ–ª–µ–π
from yourapp.models import User, Author, Category, Post, Comment
from django.utils import timezone

–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user1 = User.objects.create_user('–ò–≤–∞–Ω', password='password1')
user2 = User.objects.create_user('–°–≤–µ—Ç–ª–∞–Ω–∞', password='password2')
–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–¥–µ–ª–∏ Author
author1 = Author.objects.create(user=user1)
author2 = Author.objects.create(user=user2)

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
category1 = Category.objects.create(name='–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ')
category2 = Category.objects.create(name='–¢—Ä–∏–ª–ª–µ—Ä')
category3 = Category.objects.create(name='–ë–æ–µ–≤–∏–∫')
category4 = Category.objects.create(name='–î–µ—Ç–µ–∫—Ç–∏–≤')
category5 = Category.objects.create(name='–ù–æ–≤–æ—Å—Ç–∏')

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –∏ –Ω–æ–≤–æ—Å—Ç–µ–π
post1 = Post.objects.create(title='–°–ª–µ–¥—Å—Ç–≤–∏–µ –≤–µ–ª–∏ —Å –†–æ–¥–Ω—É–ª—å–∫–æ–π', text='–ê –≤–æ—Ç –∏ –Ω–∞—à–µ –æ—á–µ—Ä–µ–¥–Ω–æ–µ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ!!!üïµÔ∏è‚ôÇÔ∏è –ö–∞–∫ –≤—ã —É–∂–µ –ø–æ–Ω—è–ª–∏, –ø–æ—Å—Ç –±—É–¥–µ—Ç –ø—Ä–æ –∂–¥—É–ª—é –î–∏–∞–Ω—É –∏ –µ–µ –Ω–µ–¥–æ–ø–∞—Ä–Ω—è –ø–µ—Ä–µ–¥—Ä—É–≥–∞ –ë–æ–≥–¥–∞–Ω–∞. –ò–Ω—Ñ—ã –º–Ω–æ–≥–æ, –Ω–æ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –ª–∏—à—å –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª–æ—Å—å –Ω–µ —Å–∏–ª—å–Ω–æ –¥–ª–∏–Ω–Ω–æ –∏ –Ω—É–¥–Ω–æ. –ù–∞—á–Ω–µ–º —Å —Ç–æ–≥–æ, —á—Ç–æ –î–∏–∞–Ω–∞ —Å –ë–æ–≥–¥–∞–Ω–æ–º –±—ã–ª–∞ –∑–Ω–∞–∫–æ–º–∞ –¥–æ —à–æ—É –∏ –¥–∞–∂–µ –µ—â–µ –¥–æ –µ–≥–æ –∞—Ä–µ—Å—Ç–∞. –ö–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç –î–∏–∞–Ω–∞, –Ω–∞ —à–æ—É –æ–Ω–∞ –ø–æ—à–ª–∞ –ª–∏—à—å —Ä–∞–¥–∏ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏–≤–ª–µ—á—å –≤–Ω–∏–º–∞–Ω–∏–µ –°–ú–ò –∫ —Å–∏—Ç—É–∞—Ü–∏–∏ –æ –∑–∞–¥–µ—Ä–∂–∞–Ω–∏–∏ –ë–æ–≥–¥–∞–Ω–∞ –±–µ–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –ø–æ —Å—Ñ–∞–±—Ä–∏–∫–æ–≤–∞–Ω–Ω–æ–º—É –¥–µ–ª—É –∏ –Ω–∞–π—Ç–∏ –∞–¥–≤–æ–∫–∞—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –µ–º—É. –¢–∞–∫ –∂–µ –ë–æ–≥–¥–∞–Ω –∏ –î–∏–∞–Ω–∞ –Ω–µ —Å–æ—Å—Ç–æ—è–ª–∏ –∏ –Ω–µ —Å–æ—Å—Ç–æ—è—Ç –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö. –î–∞, –î–∏–∞–Ω–∞ –±—ã–ª–∞ –≤ –Ω–µ–≥–æ –≤–ª—é–±–ª–µ–Ω–∞ –∏ —Ö–æ—Ç–µ–ª–∞ —Ä–∞—Å–ø–∏—Å–∞—Ç—å—Å—è, –Ω–æ –ë–æ–≥–¥–∞–Ω –±—ã–ª –ø—Ä–æ—Ç–∏–≤ —ç—Ç–æ–≥–æ, —Å–∫–∞–∑–∞–≤, —á—Ç–æ –º—ã –∫–ª–∞—Å—Å–Ω—ã–µ –¥—Ä—É–∑—å—è, –Ω–∞–º –∏ —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ, –ø–æ—ç—Ç–æ–º—É –æ–Ω –æ—Ç–∫–ª–æ–Ω–∏–ª —ç—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.', author=author1)
post2 = Post.objects.create(title='–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –ù–µ–∑–Ω–∞–π–∫–∏ –≤ —Å—Ç–∏–ª–µ –±–æ–µ–≤–∏–∫–∞', text='–í —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ–º –º–∏—Ä–µ, –≥–¥–µ —Ü–∞—Ä–∏—Ç –º–∞–≥–∏—è –∏ —á—É–¥–µ—Å–∞, –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π ‚Äî –ù–µ–∑–Ω–∞–π–∫–∞, —Å–º–µ–ª—ã–π –∏ –Ω–µ–ø–æ–∫–æ—Ä–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å –æ–≥—Ä–æ–º–Ω—ã–º –∂–µ–ª–∞–Ω–∏–µ–º —É–∑–Ω–∞—Ç—å –≤—Å—ë. –û–Ω –∂–∏–≤–µ—Ç –≤ —Ü–≤–µ—Ç–æ—á–Ω–æ–º –≥–æ—Ä–æ–¥–µ, –≥–¥–µ –µ–≥–æ –¥—Ä—É–∑—å—è ‚Äî –∫–æ—Ä–æ—Ç—ã—à–∫–∏, –≥–æ—Ç–æ–≤—ã–µ –Ω–∞ –≤—Å—ë —Ä–∞–¥–∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π.
–û–¥–Ω–∞–∂–¥—ã, –£–∑–Ω–∞–≤ –æ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è—Ö –∂–∏—Ç–µ–ª–µ–π —Å–æ—Å–µ–¥–Ω–µ–≥–æ –≥–æ—Ä–æ–¥–∞, –ù–µ–∑–Ω–∞–π–∫–∞ —Ä–µ—à–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –æ–ø–∞—Å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ. –°–æ–ª–∏–¥–∞—Ä–Ω—ã–µ –¥—Ä—É–∑—å—è ‚Äî –ü–æ–Ω—á–∏–∫ –∏ –ú–∏Mi ‚Äî —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ, —á—Ç–æ–±—ã —Ä–∞–∑–≥–∞–¥–∞—Ç—å –∑–∞–≥–∞–¥–∫—É —á–µ—Ä–Ω–æ–π –º–∞–≥–∏–∏, —É–≥—Ä–æ–∂–∞—é—â–µ —Ä–∞—Å–ø–æ–ª–∑–∞—é—â–µ–π—Å—è –ø–æ –æ–∫—Ä—É–≥–µ.
–°–æ–±—Ä–∞–≤—à–∏—Å—å, –≥–µ—Ä–æ–∏ –≤–æ–æ—Ä—É–∂–∞—é—Ç—Å—è –Ω–µ–æ–±—ã—á–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Ö–∏—Ç—Ä—ã–º–∏ –ø–ª–∞–Ω–∞–º–∏. –í —Ö–æ–¥–µ —Å–ø–ª–æ—á–µ–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –æ–Ω–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å –Ω–∞–µ–º–Ω–∏–∫–∞–º–∏, –≥–æ—Ç–æ–≤—ã–º–∏ –Ω–∞ –≤—Å—ë —Ä–∞–¥–∏ –≤–ª–∞—Å—Ç–∏ –∏ –∑–æ–ª–æ—Ç–∞. –ò—Ö –ø—É—Ç–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –≤ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏—Ö —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è—Ö, –≥–¥–µ –¥—Ä—É–∑—å—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–æ–≤–∫–æ—Å—Ç—å –∏ —Å–º–µ–∫–∞–ª–∫—É, —á—Ç–æ–±—ã –æ–¥–µ—Ä–∂–∞—Ç—å –≤–µ—Ä—Ö –Ω–∞–¥ –∑–ª–æ–¥–µ—è–º–∏.
–ù–µ–∑–Ω–∞–π–∫–∞ –ø—Ä–æ—è–≤–ª—è–µ—Ç –ª–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞, —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Å–∏–ª—É, –Ω–æ –∏ —É–º–µ–Ω–∏–µ –¥—Ä—É–∂–∏—Ç—å –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ. –û–¥–Ω–∞–∂–¥—ã, –≤–æ –≤—Ä–µ–º—è —Ä–µ—à–∞—é—â–µ–π –±–∏—Ç–≤—ã –≤ —Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º –ª–µ—Å—É, –∫–æ–≥–¥–∞ –≤—Å—ë –∫–∞–∂–µ—Ç—Å—è –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–º, –∏–º–µ–Ω–Ω–æ –µ–≥–æ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å–ø–∞—Å–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é. 
–í –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤, –±–ª–∞–≥–æ–¥–∞—Ä—è —Ö—Ä–∞–±—Ä–æ—Å—Ç–∏ –∏ –¥—Ä—É–∂–±–µ, –≥–µ—Ä–æ–∏ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–ø–∞—Å–∞—é—Ç —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π, –Ω–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –º–∏—Ä –≤ —Å–≤–æ–∏ –∫—Ä–∞—è, –æ—Å—Ç–∞–≤–∏–≤ —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤ –Ω–∏ —Å —á–µ–º. –û–Ω–∏ —É—á–∞—Ç—Å—è —Ç–æ–º—É, —á—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∞—è —Å–∏–ª–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ –∏ —Ä–µ—à–∏–º–æ—Å—Ç–∏, –∏, –ø–æ–∫–∏–Ω—É–≤ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –¥–æ–º–æ–π ‚Äî –≥–æ—Ç–æ–≤—ã–µ –∫ –Ω–æ–≤—ã–º –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º..', author=author2)
news1 = Post.objects.create(title='–ù–æ–≤–æ—Å—Ç–∏', text =  '–í–∞–∂–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ!
–£–≤–∞–∂–∞–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏! 
–ú—ã —Ä–∞–¥—ã —Å–æ–æ–±—â–∏—Ç—å –≤–∞–º –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª–∏—Ç —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –≤–≤–µ—Å—Ç–∏ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞. –û–¥–Ω–∞–∫–æ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç—Ç–∏—Ö —Ä–∞–±–æ—Ç –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞.
–°–∞–π—Ç –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å 23:00 –¥–æ 6:00 –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ 1 –∞–ø—Ä–µ–ª—è. –ú—ã –ø—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞ –∏ —Ü–µ–Ω–∏–º –≤–∞—à–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤ —ç—Ç–æ—Ç –≤–∞–∂–Ω—ã–π –¥–ª—è –Ω–∞—Å –º–æ–º–µ–Ω—Ç.
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–∞–º –µ—â—ë –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ ‚Äî —É–∂–µ –≤—Å–∫–æ—Ä–µ –≤—Å–µ –Ω–æ–≤—à–µ—Å—Ç–≤–∞ —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã!
–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Ç–µ—Ä–ø–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É! ', author=author1)

–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
PostCategory.objects.create(post= post1, category=category1)
PostCategory.objects.create(post= post1, category= category4)
PostCategory.objects.create(post=post2, category=category3)
PostCategory.objects.create(post=post2, category= category1)
PostCategory.objects.create(post=post2, category= category2)
PostCategory.objects.create(post=news1, category=category5)
PostCategory.objects.create(post=news1, category=category5)

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
Comment1 = Comment.objects.create(post=post1, user=user2, text='–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è! –ù–∞–¥–µ–µ–º—Å—è, —á—Ç–æ –æ–Ω–∏ —Å–µ–π—á–∞—Å –∂–∏–≤—É—Ç —Ö–æ—Ä–æ—à–æ –≤–¥–∞–ª–∏ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞))')
Comment2 = Comment.objects.create(post=post1, user=user1, text='–í–æ—Ç —ç—Ç–æ –±–æ–µ–≤–∏–∫‚Ä¶')
Comment3 = Comment.objects.create(post=news1, user=user2, text= ' –ü–æ–Ω–∏–º–∞—é, —á—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∞–∂–Ω—ã, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –ª–∏ –¥–æ–ª–≥–æ? –í–µ—á–µ—Ä–æ–º –∂–µ –º–Ω–æ–≥–∏–µ –ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π. –ù–∞–¥–µ—é—Å—å, –≤—Å—ë –ø—Ä–æ–π–¥–µ—Ç –≥–ª–∞–¥–∫–æ!')
Comment4 = Comment.objects.create(post=news1, user=user2, text= '–ö–∞–∫ –∂–µ –∑–¥–æ—Ä–æ–≤–æ! –ñ–¥—É –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º. –ù–∞–¥–µ—é—Å—å, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å –æ–∂–∏–¥–∞–Ω–∏—è. –£–¥–∞—á–∏ –∫–æ–º–∞–Ω–¥–µ!')

–†–µ–π—Ç–∏–Ω–≥ –ø–æ—Å—Ç–æ–≤
post1.like()
post2.dislike()
news1.like()
news1.like()

–†–µ–π—Ç–∏–Ω–≥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
Comment1.like()
Comment1.dislike()
Comment2.like()
Comment4.like()
Comment4.like()

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
user1.refresh_from_db()
user2.refresh_from_db()

–õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
best_user = Author.objects.order_by('rating').first()
print(best_user.Author.id_user.User.username, best_user.rating)

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª—É—á—à–µ–π —Å—Ç–∞—Ç—å–µ
best_post = Post.objects.annotate(total_likes=Count('likes')).order_by('-total_likes').first()
print(f'–î–∞—Ç–∞: {best_article.created_at}, –ê–≤—Ç–æ—Ä: {best_article.author.user.username}, –†–µ–π—Ç–∏–Ω–≥: {best_article.rating}, –ó–∞–≥–æ–ª–æ–≤–æ–∫: {best_article.title}, –ü—Ä–µ–≤—å—é: {best_article.content[:100]}')    print(best_post.created_at, best_post.author.user.username, best_post.rating, best_post.title, best_post.preview)

–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
comments = Comment.objects.filter(post=best_article)
for comment in comments:
    print(f'–î–∞—Ç–∞: {comment.created_at}, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {comment.user.username}, '
          f'–†–µ–π—Ç–∏–Ω–≥: {comment.rating}, –¢–µ–∫—Å—Ç: {comment.text}')

